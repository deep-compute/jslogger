!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.uuidv1=e()}}(function(){return function e(n,t,o){function r(s,u){if(!t[s]){if(!n[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var c=t[s]={exports:{}};n[s][0].call(c.exports,function(e){var t=n[s][1][e];return r(t?t:e)},c,c.exports,e,n,t,o)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,n,t){function o(e,n){var t=n||0,o=r;return o[e[t++]]+o[e[t++]]+o[e[t++]]+o[e[t++]]+"-"+o[e[t++]]+o[e[t++]]+"-"+o[e[t++]]+o[e[t++]]+"-"+o[e[t++]]+o[e[t++]]+"-"+o[e[t++]]+o[e[t++]]+o[e[t++]]+o[e[t++]]+o[e[t++]]+o[e[t++]]}for(var r=[],i=0;256>i;++i)r[i]=(i+256).toString(16).substr(1);n.exports=o},{}],2:[function(e,n,t){(function(e){var t,o=e.crypto||e.msCrypto;if(o&&o.getRandomValues){var r=new Uint8Array(16);t=function(){return o.getRandomValues(r),r}}if(!t){var i=new Array(16);t=function(){for(var e,n=0;16>n;n++)0===(3&n)&&(e=4294967296*Math.random()),i[n]=e>>>((3&n)<<3)&255;return i}}n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,n,t){function o(e,n,t){var o=n&&t||0,r=n||[];e=e||{};var s=void 0!==e.clockseq?e.clockseq:a,l=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,d=l-f+(g-c)/1e4;if(0>d&&void 0===e.clockseq&&(s=s+1&16383),(0>d||l>f)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=l,c=g,a=s,l+=122192928e5;var m=(1e4*(268435455&l)+g)%4294967296;r[o++]=m>>>24&255,r[o++]=m>>>16&255,r[o++]=m>>>8&255,r[o++]=255&m;var w=l/4294967296*1e4&268435455;r[o++]=w>>>8&255,r[o++]=255&w,r[o++]=w>>>24&15|16,r[o++]=w>>>16&255,r[o++]=s>>>8|128,r[o++]=255&s;for(var v=e.node||u,p=0;6>p;++p)r[o+p]=v[p];return n?n:i(r)}var r=e("./lib/rng"),i=e("./lib/bytesToUuid"),s=r(),u=[1|s[0],s[1],s[2],s[3],s[4],s[5]],a=16383&(s[6]<<8|s[7]),f=0,c=0;n.exports=o},{"./lib/bytesToUuid":1,"./lib/rng":2}]},{},[3])(3)}),function(){"use strict";function e(e){function n(e){S=e.user,delete e.user,T=e}function t(e){var n=new Date,t=window.location.host,r={UUID:uuidv1(),timestamp:n.getTime(),message:e.message,level:e.type,url:e.url,host_url:t,misc:e.misc};if(null!=S&&(r.user=S),null!=T)for(var i in T)r[i]=T[i];o(r)}function o(e){y+=1,window.localStorage.setItem("logging_"+e.UUID,JSON.stringify(e)),y>b&&(p(),y=0)}function r(e,n,o,r){var i={type:e,message:n,url:o,misc:r};t(i)}function i(){r("info",arguments[0],window.location.href,arguments[1]),console.info(arguments[0])}function s(){r("exception",arguments[0],window.location.href,arguments[1]),console.error(arguments[0])}function u(){r("debug",arguments[0],window.location.href,arguments[1]),console.debug(arguments[0])}function a(){r("log",arguments[0],window.location.href,arguments[1]),console.log(arguments[0])}function f(){r("warn",arguments[0],window.location.href,arguments[1]),console.warn(arguments[0])}function c(){r("msg",arguments[0],window.location.href,arguments[1])}function l(){r("exception",arguments[0],window.location.href,arguments[1]),console.error(arguments[0])}function g(e,n,o,r,i){try{var s=(new Date).getTime(),u={status:o.status,ready_state:o.readyState,status_message:o.statusText,url:n,start_time_ms:r,end_time_ms:s,request_time_ms:s-r,response_length:o.responseText.length};return i||(u.response=o.responseText.substring(0,2e3)),void t({message:e,misc:u})}catch(a){}}function d(e){var n=(new Date).getTime(),t=$.ajax(e);return t.done(function(){g("ajax success",e.url,t,n,!0)}),t.fail(function(){g("ajax success",e.url,t,n,!1)}),t}function m(e,n){var t=(new Date).getTime(),o=$.getJSON(e,n);return o.done(function(){g("getJSON success",e,o,t,!0)}),o.fail(function(){g("getJSON failed",e,o,t,!1)}),o}function w(e,n){var t=(new Date).getTime(),o=$.get(e,n);return o.done(function(){g("get request success",e,o,t,!0)}),o.fail(function(){g("get request failed",e,o,t,!1)}),o}function v(e,n){var t=(new Date).getTime(),o=$.post(e,n);return o.done(function(){g("post request success",e,o,t,!0)}),o.fail(function(){g("post request failed",e,o,t,!1)}),o}function p(){D&&h()}function h(){y=0,D=!1;var e=0,n=[],t=[];for(var o in window.localStorage)e=o.startsWith("logging")?e+1:e;if(0==e)return void(D=!0);for(var r in window.localStorage)r.startsWith("logging")&&n.length<1e3&&(n.push(JSON.parse(window.localStorage.getItem(r))),t.push(r));var i={logs:n},s=$.ajax({url:x,type:"POST",data:JSON.stringify(i),timeout:6e5,success:function(){for(var e in t)delete window.localStorage[t[e]]}});s.always(function(t){e-=n.length,e>0&&h(),D=!0})}this.ajax=d,this.getJSON=m,this.get=w,this.post=v,this.exception=l,this.info=i,this.error=s,this.debug=u,this.log=a,this.warn=f,this.message=c,this.bind=n;var y=0,x=e.url,_=e.time_ms?e.time_ms:5e3,b=e.max_logs?e.max_logs:1e3,p=p,t=t,o=o,S=null,T=null,D=!0;setInterval(function(){p()},_),window.onerror=function(e,n,t,r,i){var s=new Date,u={UUID:uuidv1(),timestamp:s.getTime(),message:e,url:n,lineno:t,colno:r,error:i,level:"javascript",host_url:window.location.host};o(u)},p()}window.jslogger=e}();
